# フロントエンド実装計画書: セーフティ（通報・ブロック）

## 📋 概要
不適切なユーザーの通報・ブロックをフロントで実装する計画。安全なUXと誤操作防止を重視。

## 🔌 対応API
- POST `/reports` 通報
- GET `/reports/my` 自分の通報一覧
- GET `/reports/{id}` 通報詳細
- POST `/blocks` ブロック
- GET `/blocks/my` ブロック一覧
- DELETE `/blocks/{user_id}` ブロック解除

## 🧭 画面/ルート
- 通報モーダル（各ユーザーカード/プロフィールから起動）
- ブロック確認ダイアログ
- `/settings/safety` セーフティ管理（自分の通報/ブロック一覧）

## 🧰 コンポーネント
- `ReportDialog`（理由入力、ガイドラインリンク）
- `BlockConfirm`（確認/取り消し）
- `SafetyList`（通報/ブロックの一覧、解除操作）

## 🔄 React Query キー
- `['reports','my']` 自分の通報
- `['blocks','my']` 自分のブロック

## 🧠 UX設計
- 破壊的操作は確認ダイアログ＋明確な文言
- 成功/失敗はトースト通知
- ブロック時は相互作用（いいね/メッセージ）UIを即時無効化

## 🔒 セキュリティ/プライバシー
- 通報者の匿名性はAPI側で担保、UIはその前提で表示
- 理由はクライアントで最長文字数制限
- CSRF/XSS 対策（フォーム/出力）

## 🧪 テスト
- 通報送信の成功/失敗/バリデーション
- ブロック作成/解除の動作
- ブロック状態が他画面（検索/チャット）に即時反映

## 📋 実装チェックリスト
- [ ] `ReportDialog` 実装（Zodバリデーション）
- [ ] `BlockConfirm` 実装
- [ ] `/settings/safety` 一覧/解除
- [ ] グローバル状態への反映（ブロック中相手のUI制御）
- [ ] テスト（単体/統合/E2E）

---
作成日: 2025-10-13 / 担当: Qupid開発チーム



